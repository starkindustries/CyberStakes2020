
undefined8 main(void)

{
  int rand_int;
  uint right_shifted_rand;
  ssize_t num_bytes_read;
  char user_input [64];
  void *buffer;
  int user_input_int;
  char *chosen_cup;
  int num_bytes_read_int;
  int cup_volume;
  
  setvbuf(stdin,(char *)0x0,2,0);
  setvbuf(stdout,(char *)0x0,2,0);
  setvbuf(stderr,(char *)0x0,2,0);
  alarm(0x3c);
  puts("Welcome to Cups Inc.");
  while( true ) {
    puts(
        "What type of cup would you like to purchase?\n0) Mug\n1) Flute\n2) Goblet (of fire)\n3) Stein\n4) Teacup\n5) Wine glass\n9) None (leave)\n"
        );
    read_line(user_input);
    user_input_int = atoi(user_input);
    chosen_cup = (char *)0x0;
    switch(user_input_int) {
    case 0:
      chosen_cup = "Mug";
      cup_volume = 0x40;
      break;
    case 1:
      chosen_cup = "Flute";
      cup_volume = 0x20;
      break;
    case 2:
      chosen_cup = "Goblet";
      cup_volume = 0x80;
      break;
    case 3:
      chosen_cup = "Stein";
      cup_volume = 0x60;
      break;
    case 4:
      chosen_cup = "Teacup";
      cup_volume = 0x30;
      break;
    case 5:
      chosen_cup = "Wine glass";
      cup_volume = 0x20;
    }
    if ((chosen_cup == (char *)0x0) || (buffer = malloc((long)cup_volume), buffer == (void *)0x0))
    break;
    puts("Alright, let\'s fill our cup now");
    num_bytes_read = read(0,buffer,(long)cup_volume);
    num_bytes_read_int = (int)num_bytes_read;
    if (num_bytes_read_int < 0) {
      return 0;
    }
    if (num_bytes_read_int != cup_volume) {
      puts("You didn\'t fill it up all the way. What\'s the matter? Not thirsty?");
    }
    puts("Alright, let\'s drink up.");
    while (0 < num_bytes_read_int) {
      sleep(1);
      printf("glug ");
      rand_int = rand();
      right_shifted_rand = (uint)(rand_int >> 0x1f) >> 0x1b;
      num_bytes_read_int =
           num_bytes_read_int - ((rand_int + right_shifted_rand & 0x1f) - right_shifted_rand);
    }
    puts("\nAh. That was tasty.");
    free(buffer);
    buffer = (void *)0x0;
  }
  return 0;
}

